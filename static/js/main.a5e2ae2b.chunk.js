(this["webpackJsonphn-clone-react"]=this["webpackJsonphn-clone-react"]||[]).push([[0],{21:function(e,t,a){e.exports=a(33)},26:function(e,t,a){},33:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(17),o=a.n(c),l=a(3);a(26);var s=function(){return r.a.createElement("div",{id:"app-header"},r.a.createElement("header",{className:"header"},r.a.createElement("div",{className:"flex"},r.a.createElement("span",{className:"header-title"},r.a.createElement("img",{src:"https://icon.now.sh/ycombinator/fff",alt:"",className:"header-logo"}),"HackerNews"),r.a.createElement(l.c,{exact:!0,to:"/",className:"header-link",activeStyle:{color:"white"}},"top"),"|",r.a.createElement(l.c,{to:"/new",className:"header-link",activeStyle:{color:"white"}},"new"),"|",r.a.createElement(l.c,{to:"/ask",className:"header-link",activeStyle:{color:"white"}},"ask"),"|",r.a.createElement(l.c,{to:"/show",className:"header-link",activeStyle:{color:"white"}},"show"),"|",r.a.createElement(l.c,{to:"/favorites",className:"header-link",activeStyle:{color:"white"}},"favorites"))))},i=a(7),m=a(9),u=a.n(m),v=a(11),d=a(4),f=a(20),E=r.a.createContext();var h=function(e){var t=e.index,a=e.story,n=e.isFavorite,c=e.addFavorite,o=e.removeFavorite;return r.a.createElement("div",{className:"story"},r.a.createElement("div",null,t?r.a.createElement("span",{className:"gray"},"".concat(t,".")):"",r.a.createElement("span",{className:"upvote"},"\u25b2 "),r.a.createElement("a",{href:a.url},a.title),a.domain?r.a.createElement("span",null," (",a.domain,")"):r.a.createElement("span",null)),r.a.createElement("div",null,r.a.createElement("div",{className:"gray"},a.points," points by ",a.user," ",a.time_ago," | ",r.a.createElement(l.b,{to:"/item?id=".concat(a.id)},a.comments_count," comments")," | ",r.a.createElement("span",{className:"favorite",onClick:function(){return n?o(a):c(a)}},r.a.createElement("img",{className:"heart",src:"https://icon.now.sh/heart/ccc",alt:""}),n?" Remove From Favorites":" Add To Favorites"))))};var p=function(e){var t=e.path,a=Object(n.useState)([]),c=Object(d.a)(a,2),o=c[0],l=c[1],s=Object(n.useState)(!1),i=Object(d.a)(s,2),m=i[0],f=i[1],p=Object(n.useState)(!1),b=Object(d.a)(p,2),j=b[0],O=b[1],w=Object(n.useContext)(E),y=w.baseUrl,k=w.favorites,N=w.addFavorite,S=w.removeFavorite,g="".concat(y,"/").concat(t);Object(n.useEffect)((function(){!function(){var e=Object(v.a)(u.a.mark((function e(){var t,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O(!1),f(!0),e.prev=2,e.next=5,fetch(g);case 5:return t=e.sent,e.next=8,t.json();case 8:a=e.sent,l(a),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),O(!0);case 15:f(!1);case 16:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(){return e.apply(this,arguments)}}()()}),[t]);var x=o.map((function(e,t){return r.a.createElement(h,{key:e.id,story:e,index:t+1,isFavorite:k.some((function(t){return t.id===e.id})),addFavorite:N,removeFavorite:S})}));return r.a.createElement("div",null,j&&"Error...",m?"Loading...":x)};var b=function e(t){var a=t.comment,n=a.comments.length>0;return r.a.createElement("div",{className:"nested-comments-".concat(a.level)},r.a.createElement("p",{className:"comment-header"},a.user," | ",a.time_ago),r.a.createElement("div",{dangerouslySetInnerHTML:{__html:a.content}}),n&&a.comments.map((function(t){return r.a.createElement(e,{key:t.id,comment:t})})))};var j=function(e){var t=Object(i.f)(),a=new URLSearchParams(t.search),c=Object(n.useState)([]),o=Object(d.a)(c,2),l=o[0],s=o[1],m=Object(n.useState)([]),f=Object(d.a)(m,2),p=f[0],j=f[1],O=Object(n.useState)(!1),w=Object(d.a)(O,2),y=w[0],k=w[1],N=Object(n.useState)(!1),S=Object(d.a)(N,2),g=S[0],x=S[1],F=Object(n.useContext)(E),C="".concat(F,"/item/").concat(a.get("id"));return Object(n.useEffect)((function(){!function(){var e=Object(v.a)(u.a.mark((function e(){var t,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(!1),k(!0),e.prev=2,e.next=5,fetch(C);case 5:return t=e.sent,e.next=8,t.json();case 8:a=e.sent,s(a),j(a.comments),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),x(!0);case 16:k(!1);case 17:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(){return e.apply(this,arguments)}}()()}),[]),r.a.createElement("div",null,g?"Error...":y?"Loading...":r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement(h,{story:l})),r.a.createElement("hr",null),p.map((function(e){return r.a.createElement(b,{key:e.id,comment:e})}))))};var O=function(){var e=Object(n.useContext)(E),t=e.favorites,a=e.addFavorite,c=e.removeFavorite,o=t.length>0?t.map((function(e,t){return r.a.createElement(h,{key:e.id,story:e,index:t+1,isFavorite:!0,addFavorite:a,removeFavorite:c})})):"Add some favorites";return r.a.createElement("div",null,o)};var w=function(){return r.a.createElement("div",{id:"router-outlet"},r.a.createElement(i.c,null,r.a.createElement(i.a,{exact:!0,path:"/"},r.a.createElement(p,{path:"news"})),r.a.createElement(i.a,{path:"/new"},r.a.createElement(p,{path:"newest"})),r.a.createElement(i.a,{path:"/ask"},r.a.createElement(p,{path:"ask"})),r.a.createElement(i.a,{path:"/show"},r.a.createElement(p,{path:"show"})),r.a.createElement(i.a,{path:"/favorites"},r.a.createElement(O,null)),r.a.createElement(i.a,{path:"/item"},r.a.createElement(j,null))))};var y=function(){return r.a.createElement("div",{id:"app-container"},r.a.createElement(s,null),r.a.createElement("div",{id:"route-container"},r.a.createElement(w,null)))};o.a.render(r.a.createElement((function(e){var t=Object(n.useState)("https://node-hnapi.herokuapp.com"),a=Object(d.a)(t,2),c=a[0],o=(a[1],Object(n.useState)([])),l=Object(d.a)(o,2),s=l[0],i=l[1];return Object(n.useEffect)((function(){var e=JSON.parse(localStorage.getItem("favorites"))||[];i(e)}),[]),Object(n.useEffect)((function(){localStorage.setItem("favorites",JSON.stringify(s))}),[s]),r.a.createElement(E.Provider,{value:{baseUrl:c,favorites:s,addFavorite:function(e){i((function(t){return[].concat(Object(f.a)(t),[e])}))},removeFavorite:function(e){i((function(t){return t.filter((function(t){return t.id!==e.id}))}))}}},e.children)}),null,r.a.createElement(l.a,null,r.a.createElement(y,null))),document.getElementById("root"))}},[[21,1,2]]]);
//# sourceMappingURL=main.a5e2ae2b.chunk.js.map